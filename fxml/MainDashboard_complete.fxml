<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="javafx.ui.controllers.MainDashboardController">
   <top>
      <VBox BorderPane.alignment="CENTER">
         <children>
            <!-- Top Navigation Bar -->
            <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="top-nav">
               <children>
                  <!-- Left side - Welcome message -->
                  <VBox alignment="CENTER_LEFT" spacing="5.0">
                     <children>
                        <Label text="Dashboard" styleClass="welcome-title" />
                        <Label text="Hi Admin, Welcome back to ProfitIQ!" styleClass="welcome-subtitle" />
                     </children>
                  </VBox>
                  
                  <!-- Spacer -->
                  <Region HBox.hgrow="ALWAYS" />
                  
                  <!-- Right side - Controls -->
                  <HBox alignment="CENTER_RIGHT" spacing="15.0">
                     <children>
                        <!-- Search field -->
                        <TextField fx:id="searchField" promptText="Search..." styleClass="search-field" prefWidth="200.0" />
                        
                        <!-- Theme toggle -->
                        <Button fx:id="themeToggleBtn" text="🌙" styleClass="icon-button" onAction="#toggleTheme" />
                        
                        <!-- Notification button -->
                        <Button fx:id="notificationBtn" text="🔔" styleClass="icon-button" onAction="#showNotifications" />
                        
                        <!-- Profile button -->
                        <Button fx:id="profileBtn" text="👤" styleClass="icon-button" />
                        
                        <!-- Settings button -->
                        <Button fx:id="settingsBtn" text="⚙️" styleClass="icon-button" />
                     </children>
                  </HBox>
               </children>
               <padding>
                  <Insets bottom="15.0" left="20.0" right="20.0" top="15.0" />
               </padding>
            </HBox>
         </children>
      </VBox>
   </top>
   
   <left>
      <!-- Sidebar Navigation -->
      <VBox prefWidth="250.0" styleClass="sidebar">
         <children>
            <!-- Logo Section -->
            <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="logo-section">
               <children>
                  <Label text="📊" styleClass="logo-icon" />
                  <Label text="ProfitIQ" styleClass="logo-text" />
               </children>
               <padding>
                  <Insets bottom="10.0" left="20.0" right="20.0" top="20.0" />
               </padding>
            </HBox>
            
            <!-- User Profile Section -->
            <HBox alignment="CENTER_LEFT" spacing="15.0" styleClass="profile-section">
               <children>
                  <!-- Avatar -->
                  <Region prefWidth="50.0" prefHeight="50.0" styleClass="avatar" />
                  
                  <!-- User Info -->
                  <VBox alignment="CENTER_LEFT" spacing="2.0">
                     <children>
                        <Label text="Admin User" styleClass="user-name" />
                        <Label text="System Administrator" styleClass="user-role" />
                     </children>
                  </VBox>
               </children>
               <padding>
                  <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
               </padding>
            </HBox>
            
            <!-- Navigation Section -->
            <VBox spacing="5.0" styleClass="navigation-section">
               <children>
                  <Label text="DASHBOARD" styleClass="nav-section-title" />
                  
                  <!-- Navigation Buttons -->
                  <Button fx:id="businessBtn" text="📊 Business Analytics" styleClass="nav-button active" onAction="#showBusinessPanel" />
                  <Button fx:id="collegeBtn" text="🎓 College Analytics" styleClass="nav-button" onAction="#showCollegePanel" />
                  <Button fx:id="researchBtn" text="📚 Research Analytics" styleClass="nav-button" onAction="#showResearchPanel" />
                  <Button fx:id="summaryBtn" text="📈 Summary Dashboard" styleClass="nav-button" onAction="#showSummaryPanel" />
                  
                  <!-- Spacer -->
                  <Region VBox.vgrow="ALWAYS" />
                  
                  <!-- Logout Button -->
                  <Button fx:id="logoutBtn" text="🚪 Logout" styleClass="nav-button logout" onAction="#handleLogout" />
               </children>
               <padding>
                  <Insets bottom="20.0" left="15.0" right="15.0" top="10.0" />
               </padding>
            </VBox>
         </children>
      </VBox>
   </left>
   
   <center>
      <!-- Main Content Area -->
      <StackPane fx:id="mainContentPane" styleClass="main-content">
         <children>
            <!-- Business Analytics Panel -->
            <VBox fx:id="businessPanel" styleClass="content-panel" visible="true">
               <children>
                  <!-- Panel Header -->
                  <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="panel-header">
                     <children>
                        <Label text="Business Analytics" styleClass="panel-title" />
                        <Region HBox.hgrow="ALWAYS" />
                        <HBox alignment="CENTER_RIGHT" spacing="10.0">
                           <children>
                              <ComboBox fx:id="chartTypeCombo" promptText="Chart Type" prefWidth="120.0" />
                              <Button text="🔄 Refresh" styleClass="action-button" onAction="#refreshBusinessData" />
                              <Button text="📤 Export" styleClass="action-button" onAction="#exportBusinessData" />
                              <Button text="➕ Add Company" styleClass="action-button primary" onAction="#showAddCompanyDialog" />
                           </children>
                        </HBox>
                     </children>
                     <padding>
                        <Insets bottom="15.0" left="20.0" right="20.0" top="20.0" />
                     </padding>
                  </HBox>
                  
                  <!-- Panel Content -->
                  <HBox spacing="20.0" styleClass="panel-content">
                     <children>
                        <!-- Data Table -->
                        <VBox prefWidth="450.0" styleClass="data-section">
                           <children>
                              <HBox alignment="CENTER_LEFT" spacing="10.0">
                                 <children>
                                    <Label text="Company Data" styleClass="section-title" />
                                 </children>
                              </HBox>
                              <TableView fx:id="companyTable" VBox.vgrow="ALWAYS">
                                 <placeholder>
                                    <Label text="No company data available" />
                                 </placeholder>
                              </TableView>
                           </children>
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="10.0" top="10.0" />
                           </padding>
                        </VBox>
                        
                        <!-- Chart Section -->
                        <VBox HBox.hgrow="ALWAYS" styleClass="chart-section">
                           <children>
                              <Label text="Profit Visualization" styleClass="section-title" />
                              <StackPane fx:id="businessChartPane" VBox.vgrow="ALWAYS" />
                           </children>
                           <padding>
                              <Insets bottom="20.0" left="10.0" right="20.0" top="10.0" />
                           </padding>
                        </VBox>
                     </children>
                  </HBox>
               </children>
            </VBox>
            
            <!-- College Analytics Panel -->
            <VBox fx:id="collegePanel" styleClass="content-panel" visible="false">
               <children>
                  <!-- Panel Header -->
                  <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="panel-header">
                     <children>
                        <Label text="College Analytics" styleClass="panel-title" />
                        <Region HBox.hgrow="ALWAYS" />
                        <HBox alignment="CENTER_RIGHT" spacing="10.0">
                           <children>
                              <Button text="🔄 Refresh" styleClass="action-button" onAction="#refreshCollegeData" />
                              <Button text="📤 Export" styleClass="action-button" onAction="#exportCollegeData" />
                              <Button text="➕ Add College" styleClass="action-button primary" onAction="#showAddCollegeDialog" />
                           </children>
                        </HBox>
                     </children>
                     <padding>
                        <Insets bottom="15.0" left="20.0" right="20.0" top="20.0" />
                     </padding>
                  </HBox>
                  
                  <!-- Panel Content -->
                  <HBox spacing="20.0" styleClass="panel-content">
                     <children>
                        <!-- Data Table -->
                        <VBox prefWidth="450.0" styleClass="data-section">
                           <children>
                              <HBox alignment="CENTER_LEFT" spacing="10.0">
                                 <children>
                                    <Label text="College Data" styleClass="section-title" />
                                 </children>
                              </HBox>
                              <TableView fx:id="collegeTable" VBox.vgrow="ALWAYS">
                                 <placeholder>
                                    <Label text="No college data available" />
                                 </placeholder>
                              </TableView>
                           </children>
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="10.0" top="10.0" />
                           </padding>
                        </VBox>
                        
                        <!-- Chart Section -->
                        <VBox HBox.hgrow="ALWAYS" styleClass="chart-section">
                           <children>
                              <Label text="Placement Rate Visualization" styleClass="section-title" />
                              <StackPane fx:id="collegeChartPane" VBox.vgrow="ALWAYS" />
                           </children>
                           <padding>
                              <Insets bottom="20.0" left="10.0" right="20.0" top="10.0" />
                           </padding>
                        </VBox>
                     </children>
                  </HBox>
               </children>
            </VBox>
            
            <!-- Research Analytics Panel -->
            <VBox fx:id="researchPanel" styleClass="content-panel" visible="false">
               <children>
                  <!-- Panel Header -->
                  <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="panel-header">
                     <children>
                        <Label text="Research Analytics" styleClass="panel-title" />
                        <Region HBox.hgrow="ALWAYS" />
                        <HBox alignment="CENTER_RIGHT" spacing="10.0">
                           <children>
                              <Button text="🔄 Refresh" styleClass="action-button" onAction="#refreshResearchData" />
                              <Button text="📤 Export" styleClass="action-button" onAction="#exportResearchData" />
                              <Button text="➕ Add Research" styleClass="action-button primary" onAction="#showAddResearchDialog" />
                           </children>
                        </HBox>
                     </children>
                     <padding>
                        <Insets bottom="15.0" left="20.0" right="20.0" top="20.0" />
                     </padding>
                  </HBox>
                  
                  <!-- Panel Content -->
                  <HBox spacing="20.0" styleClass="panel-content">
                     <children>
                        <!-- Data Table -->
                        <VBox prefWidth="450.0" styleClass="data-section">
                           <children>
                              <HBox alignment="CENTER_LEFT" spacing="10.0">
                                 <children>
                                    <Label text="Research Papers" styleClass="section-title" />
                                 </children>
                              </HBox>
                              <TableView fx:id="researchTable" VBox.vgrow="ALWAYS">
                                 <placeholder>
                                    <Label text="No research data available" />
                                 </placeholder>
                              </TableView>
                           </children>
                           <padding>
                              <Insets bottom="20.0" left="20.0" right="10.0" top="10.0" />
                           </padding>
                        </VBox>
                        
                        <!-- Chart Section -->
                        <VBox HBox.hgrow="ALWAYS" styleClass="chart-section">
                           <children>
                              <Label text="Citations Over Time" styleClass="section-title" />
                              <StackPane fx:id="researchChartPane" VBox.vgrow="ALWAYS" />
                           </children>
                           <padding>
                              <Insets bottom="20.0" left="10.0" right="20.0" top="10.0" />
                           </padding>
                        </VBox>
                     </children>
                  </HBox>
               </children>
            </VBox>
            
            <!-- Summary Dashboard Panel -->
            <VBox fx:id="summaryPanel" styleClass="content-panel" visible="false">
               <children>
                  <!-- Panel Header -->
                  <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="panel-header">
                     <children>
                        <Label text="Summary Dashboard" styleClass="panel-title" />
                        <Region HBox.hgrow="ALWAYS" />
                        <HBox alignment="CENTER_RIGHT" spacing="10.0">
                           <children>
                              <Button text="🔄 Refresh" styleClass="action-button" onAction="#refreshSummaryData" />
                              <Button text="📤 Export Report" styleClass="action-button" onAction="#exportSummaryReport" />
                              <Button text="📊 Generate Report" styleClass="action-button primary" onAction="#generateSummaryReport" />
                           </children>
                        </HBox>
                     </children>
                     <padding>
                        <Insets bottom="15.0" left="20.0" right="20.0" top="20.0" />
                     </padding>
                  </HBox>
                  
                  <!-- Panel Content -->
                  <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                     <content>
                        <VBox spacing="20.0" styleClass="panel-content">
                           <children>
                              <!-- KPI Cards -->
                              <HBox spacing="20.0" styleClass="kpi-cards">
                                 <children>
                                    <VBox fx:id="revenueCard" styleClass="kpi-card" />
                                    <VBox fx:id="customersCard" styleClass="kpi-card" />
                                    <VBox fx:id="ordersCard" styleClass="kpi-card" />
                                    <VBox fx:id="growthCard" styleClass="kpi-card" />
                                 </children>
                              </HBox>
                              
                              <!-- Charts Grid -->
                              <HBox spacing="20.0" styleClass="charts-grid">
                                 <children>
                                    <VBox fx:id="salesChartCard" styleClass="chart-card" />
                                    <VBox fx:id="revenueChartCard" styleClass="chart-card" />
                                    <VBox fx:id="distributionChartCard" styleClass="chart-card" />
                                 </children>
                              </HBox>
                              
                              <!-- Summary Report -->
                              <VBox styleClass="summary-report-card">
                                 <children>
                                    <Label text="Detailed Summary Report" styleClass="section-title" />
                                    <TextArea fx:id="summaryTextArea" styleClass="summary-text-area" wrapText="true" />
                                 </children>
                                 <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                 </padding>
                              </VBox>
                           </children>
                        </VBox>
                     </content>
                  </ScrollPane>
               </children>
            </VBox>
         </children>
      </StackPane>
   </center>
</BorderPane>